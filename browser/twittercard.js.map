{"version":3,"sources":["webpack://twittercard/webpack/universalModuleDefinition","webpack://twittercard/webpack/bootstrap","webpack://twittercard/./src/draw.js"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","createGradient","context","gradientData","x","y","w","h","gradient","createLinearGradient","forEach","g","addColorStop","stop","color","fillStyle","fillRect","width","height","texts","templateImage","backgroundColor","roundedBorder","borderTop","borderRight","borderBottom","borderLeft","guides","WIDTH","HEIGHT","textBaseline","radius","beginPath","moveTo","arcTo","clip","createRoundRectPath","drawImage","aText","font","console","log","textAlign","text","maxWidth","lineHeight","actualBoundingBoxAscent","actualBoundingBoxDescent","measureText","textHeight","words","split","lines","line","length","testLine","push","trim","lineDiff","firstLineY","fillText","drawWrappedText"],"mappings":"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","file":"twittercard.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"twittercard\"] = factory();\n\telse\n\t\troot[\"twittercard\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/draw.js\");\n","/**\n * Creates a rounded rect path that is used to clip the context\n * \n * @param {*} context Draw context\n * @param {number} x Start horizontal position\n * @param {number} y Start vertical position\n * @param {number} w Rectangle width\n * @param {number} h Rectangle height\n * @param {number} r Rectangle radius\n */\nfunction createRoundRectPath(context, x, y, w, h, r) {\n    if (w < 2 * r) r = w / 2;\n    if (h < 2 * r) r = h / 2;\n    context.beginPath();\n    context.moveTo(x + r, y);\n    context.arcTo(x + w, y, x + w, y + h, r);\n    context.arcTo(x + w, y + h, x, y + h, r);\n    context.arcTo(x, y + h, x, y, r);\n    context.arcTo(x, y, x + w, y, r);\n    context.clip();\n}\n\n/**\n * Creates a gradient\n * \n * @param {object} context \n * @param {*} gradientData \n * @param {number} x \n * @param {number} y \n * @param {number} w \n * @param {number} h \n */\nfunction createGradient(context, gradientData, x, y, w, h) {\n    if (gradientData) {\n        const gradient = context.createLinearGradient(x, y, w, h);\n        gradientData.forEach(g => {\n            gradient.addColorStop(g.stop, g.color)\n        })\n        context.fillStyle = gradient;\n        context.fillRect(x, y, w, h);\n    }\n}\n\n/**\n * Draw the text on multiple lines if necessary.\n * Text is split by space, and the words are fit on lines.\n * If the text is a single big text, with no spaces, it will be displayed on\n * one line no matter how big it is. \n * \n * @param {string} text The text to draw\n * @param {object} context The draw context\n * @param {number} x Horizontal posititon\n * @param {number} y Vertical position of the text middle\n * @param {number} maxWidth Maximum width of the text\n * @param {number} lineHeight The line height\n */\nfunction drawWrappedText(text, context, x, y, maxWidth, lineHeight) {\n    const { actualBoundingBoxAscent, actualBoundingBoxDescent } = context.measureText(text);\n    const textHeight = actualBoundingBoxAscent + actualBoundingBoxDescent;\n    const words = text.split(' ');\n    const lines = [];\n    let line = '';\n\n    for (let n = 0; n < words.length; n++) {\n        let testLine = line + words[n] + ' ';\n        let metrics = context.measureText(testLine);\n        let testWidth = metrics.width;\n\n        // if line too big \n        if (testWidth > maxWidth && n > 0) {\n            lines.push(line.trim());\n            line = words[n] + ' ';\n        } else {\n            line = testLine;\n        }\n    }\n    if (line) lines.push(line.trim());\n\n    const lineDiff = lineHeight - (lineHeight - textHeight) / 2;\n    let firstLineY = y - (lines.length * lineDiff) / 2\n    for (let i = 0; i < lines.length; i++) {\n        context.fillText(lines[i], x, firstLineY + i * lineDiff);\n    }\n}\n\n\n/**\n * Draw the card using context\n * @param {object} options \n */\nfunction draw(context, {\n    width,\n    height,\n    texts,\n    templateImage,\n    backgroundColor,\n    roundedBorder,\n    borderTop,\n    borderRight,\n    borderBottom,\n    borderLeft,\n    guides\n}) {\n\n    const WIDTH = width || 1280;\n    const HEIGHT = height || 669;\n    context.textBaseline = 'top';\n\n    if (roundedBorder) {\n        if (roundedBorder.color) {\n            context.fillStyle = roundedBorder.color;\n            context.fillRect(0, 0, WIDTH, HEIGHT);\n        }\n        if (roundedBorder.gradient) {\n            createGradient(context, roundedBorder.gradient, 0, 0, WIDTH, HEIGHT);\n        }\n\n        let x = roundedBorder.width || 0, y = roundedBorder.width || 0, w = WIDTH - 2 * x, h = HEIGHT - 2 * y, r = roundedBorder.radius || 0;\n        createRoundRectPath(context, x, y, w, h, r)\n    }\n\n\n    // fill all with bg color\n    if (backgroundColor) {\n        context.fillStyle = backgroundColor;\n        context.fillRect(0, 0, WIDTH, HEIGHT)\n    }\n\n    // draw template image\n    if (templateImage) {\n        context.drawImage(templateImage, 0, 0)\n    }\n\n    if (borderTop) {\n        if (borderTop.color) {\n            context.fillStyle = borderTop.color\n            context.fillRect(0, 0, WIDTH, borderTop.width)\n        }\n        if (borderTop.gradient) {\n            createGradient(context, borderTop.gradient, 0, 0, WIDTH, borderTop.width);\n        }\n    }\n\n    if (borderRight) {\n        if (borderRight.color) {\n            context.fillStyle = borderRight.color\n            context.fillRect(WIDTH - borderRight.width, 0, WIDTH - borderRight.width, HEIGHT)\n        }\n        if (borderRight.gradient) {\n            createGradient(context, borderRight.gradient, WIDTH - borderRight.width, 0, WIDTH - borderRight.width, HEIGHT);\n        }\n    }\n\n    if (borderBottom) {\n        if (borderBottom.color) {\n            context.fillStyle = borderBottom.color\n            context.fillRect(0, HEIGHT - borderBottom.width, WIDTH, HEIGHT - borderBottom.width)\n        }\n        if (borderBottom.gradient) {\n            createGradient(context, borderBottom.gradient, 0, HEIGHT - borderBottom.width, WIDTH, HEIGHT - borderBottom.width);\n        }\n    }\n\n    if (borderLeft) {\n        if (borderLeft.color) {\n            context.fillStyle = borderLeft.color\n            context.fillRect(0, 0, borderLeft.width, HEIGHT)\n        }\n        if (borderLeft.gradient) {\n            createGradient(context, borderLeft.gradient, 0, 0, borderLeft.width, HEIGHT);\n        }\n    }\n\n    if (texts) {\n        texts.forEach(aText => {\n            context.fillStyle = aText.color;\n            context.font = aText.font;\n            console.log('FONT', aText.font)\n            if (aText.x === 'center') {\n                context.textAlign = 'center';\n            }\n            const x = aText.x === 'center' ? WIDTH / 2 : aText.x;\n            const y = aText.y === 'center' ? HEIGHT / 2 : aText.y;\n            drawWrappedText(aText.text, context, x, y, aText.maxWidth || 700, aText.lineHeight || 20)\n        })\n    }\n\n    if (guides) {\n        context.fillStyle = 'lime';\n        context.fillRect(0, HEIGHT / 2, WIDTH, 1)\n        context.fillRect(WIDTH / 2, 0, 1, HEIGHT)\n    }\n\n}\n\nmodule.exports = draw;"],"sourceRoot":""}